QueryType=Object.freeze({Update:"Update",Select:"Select"});var subject;var pred;var obj;var Expression=function(t,n,r){this.subject=t;this.pred=n;this.obj=r};Expression.prototype.setSubject=function(e){if(e instanceof Subject){this.subject=e}};Expression.prototype.setPredicate=function(e){if(e instanceof Predicate){this.pred=e}};Expression.prototype.setObject=function(e){if(e instanceof rdfObject){this.obj=e}};Expression.prototype.buildExpression=function(){if(this.subject.isLit()){console.log("Subject cannot be a literal, returning null");return null}return this.subject.getValue()+" "+this.pred.getPredicate()+" "+this.obj.getValue()};Expression.prototype.getExpression=function(e){if(e)return this.buildExpression();else return this.buildExpressionNoSubject()};Expression.prototype.buildExpressionNoSubject=function(){if(this.subject.isLit()){console.log("Subject cannot be a literal, returning null");return null}return this.pred.getPredicate()+" "+this.obj.getValue()};var uri;var shortcode;var Prefix=function(t,n){this.uri=n;this.shortcode=t};Prefix.prototype.getUri=function(){return this.uri};Prefix.prototype.setUri=function(e){this.uri=e};Prefix.prototype.getShortcode=function(){return this.shortcode};Prefix.prototype.setShortcode=function(e){this.shortcode=e};Prefix.prototype.buildFullPrefix=function(){if(this.shortcode===null||this.shortcode==""){throw"shortcode is null or empty";return null}if(this.uri===null||this.uri==""){throw"uri is null or empty";return null}return this.shortcode+":"+this.uri};Prefix.prototype.getFullPrefix=function(){return this.buildFullPrefix()};var prefix;var verb;var variable;var Predicate=function(t,n){this.prefix=t;this.verb=n};Predicate.prototype.setPrefix=function(e){this.prefix=e};Predicate.prototype.setVerb=function(e){this.verb=e};Predicate.prototype.getPredicate=function(){if(this.verb==null&&this.prefix==null)return this.getVariable();return this.prefix.shortcode+":"+this.verb};Predicate.prototype.getVariable=function(){if(this.variable==null)this.variable="?"+this.hash();return this.variable};Predicate.prototype.hash=function(){var e=0;if(this.verb==null&&this.prefix==null){return Math.floor(Math.random()*2e9+1)}var t=verb+""+uri;if(t.length==0)return e;for(i=0;i<t.length;i++){char=t.charCodeAt(i);e=(e<<5)-e+char;e=e&e}return Math.abs(e)};var uri;var literal;var isLiteral;var variable;var rdfObject=function(t,n){if(n===undefined||n==false){this.uri=t;this.isLiteral=false}else{this.literal=t;this.isLiteral=true}};rdfObject.prototype.getValue=function(){if(this.uri==null&&this.literal==null){return this.getVariable()}if(this.isLiteral){return this.getLiteral()}else{return this.getUri()}};rdfObject.prototype.getUri=function(){if(this.uri.charAt(0)!="<")this.uri="<"+this.uri;if(this.uri.charAt(this.uri.length-1)!=">")this.uri+=">";return this.uri};rdfObject.prototype.getLiteral=function(){if(this.literal.charAt(0)!='"')this.literal='"'+this.literal;if(this.literal.charAt(this.literal.length-1)!='"')this.literal+='"';return this.literal};rdfObject.prototype.setUri=function(e){this.uri=e;this.isLiteral=false};rdfObject.prototype.setLiteral=function(e){this.literal=e;this.isLiteral=true};rdfObject.prototype.isLit=function(){return this.isLiteral};rdfObject.prototype.getVariable=function(){if(this.variable==null)this.variable="?"+this.hash();return this.variable};rdfObject.prototype.hash=function(){var e=0;var t="";if(this.isLiteral){t=this.literal}else{t=this.uri}if(t==null){return Math.floor(Math.random()*2e9+1)}if(t.length==0)return e;for(i=0;i<t.length;i++){char=t.charCodeAt(i);e=(e<<5)-e+char;e=e&e}return Math.abs(e)};var map;var SimpleMap=function(){this.map=new Object};SimpleMap.prototype.get=function(e){return this.map[e]};SimpleMap.prototype.put=function(e,t){this.map[e]=t};SimpleMap.prototype.getAll=function(){return this.map};var type;var prefixes;var expressions;var SelectQueryGenerator=function(){this.prefixes=new SimpleMap;this.expressions=new Array};SelectQueryGenerator.prototype.setType=function(e){if(QueryType[e]!=null)this.type=e;else throw"Incompatible type given for type"};SelectQueryGenerator.prototype.addExpression=function(e){if(e instanceof Expression)this.expressions.push(e);else throw"Incompatible type given for expression"};SelectQueryGenerator.prototype.addPrefix=function(e){if(e instanceof Prefix)this.prefixes.put(e.getShortcode(),e);else throw"Incompatible type given for prefix"};SelectQueryGenerator.prototype.buildQuery=function(){if(this.prefixes==null){throw"prefixes cannot be null";return null}if(this.expressions==null||this.expressions.length==0){throw"expressions cannot be null or empty";return null}var e="";for(var t in this.prefixes.getAll()){var n=this.prefixes.get(t).getFullPrefix();if(n!=null)e+="PREFIX "+n+"\n"}e+="SELECT * {";for(var r=0;r<this.expressions.length;r++){var i=false;if(r==0)i=true;var s=this.expressions[r].getExpression(i);if(s!=null)e+=s;if(r<this.expressions.length-1)e+=";\n";else e+=".\n"}e+="}";return e};SelectQueryGenerator.prototype.getQuery=function(){return this.buildQuery()};var type;var prefixes;var expressions;var UpdateQueryGenerator=function(){this.prefixes=new SimpleMap;this.expressions=new Array};UpdateQueryGenerator.prototype.setType=function(e){if(QueryType[e]!=null)this.type=e;else throw"Incompatible type given for type"};UpdateQueryGenerator.prototype.addExpression=function(e){if(e instanceof Expression)this.expressions.push(e);else throw"Incompatible type given for expression"};UpdateQueryGenerator.prototype.addPrefix=function(e){if(e instanceof Prefix)this.prefixes.put(e.getShortcode(),e);else throw"Incompatible type given for prefix"};UpdateQueryGenerator.prototype.buildQuery=function(){if(this.prefixes==null){throw"prefixes cannot be null";return null}if(this.expressions==null||this.expressions.length==0){throw"expressions cannot be null or empty";return null}var e="";for(var t in this.prefixes.getAll()){temppref=this.prefixes.get(t).getFullPrefix();if(temppref!=null)e+="PREFIX "+temppref+"\n"}e+="INSERT DATA{";for(var n=0;n<this.expressions.length;n++){var r=false;if(n==0)r=true;var i=this.expressions[n].getExpression(r);if(i!=null)e+=i;if(n<this.expressions.length-1)e+=";\n";else e+=".\n"}e+="}";return e};UpdateQueryGenerator.prototype.getQuery=function(){return this.buildQuery()}